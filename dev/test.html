<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>AdefyWebGL Test</title>

  <script type="text/javascript" src="./underscore.min.js"></script>
  <script type="text/javascript" src="./cp.min.js"></script>
  <script type="text/javascript" src="./sylvester.js"></script>
  <script type="text/javascript" src="./glUtils.js"></script>
  <script type="text/javascript" src="./are.js"></script>

  <style>
  * {
    padding: 0;
    margin: 0;
  }
  </style>
</head>

<body>
  <script>

    var manifest = {
      "textures": [{
        "type": "image",
        "name": "metalGrate",
        "path": "metalGrate.jpg"
      },{
        "type": "image",
        "name": "roundThing",
        "path": "roundThing.jpg"
      }]
    };

    var width = window.innerWidth;
    var height = window.innerHeight;

    new AREEngine(width, height, function() {
      window.AdefyGLI.Engine().loadManifest(JSON.stringify(manifest), function() {

        var ground = new ARERectangleActor(width, height * 0.05);
        ground.setPosition({ x: width / 2, y: height * 0.025 })
        .setTexture("metalGrate")
        .setTextureRepeat(20, 0.5)
        .createPhysicsBody(0, 0.7, 0.6);

        new ARECircleActor(128)
        .setPosition({ x: width / 2, y: height / 2 })
        .setTexture("roundThing")
        .createPhysicsBody(100, 0.8, 0.7);

        var createBall = function() {
          var x = Math.random() * width;
          var y = (Math.random() * 500) + height;

          var mass = Math.random() * 100;
          var friction = Math.random();
          var elasticity = Math.random() * 1.2;

          new ARECircleActor(Math.round(Math.random() * 32) + 5)
          .setPosition({ x: x, y: y })
          .setTexture("roundThing")
          .createPhysicsBody(mass, friction, elasticity);
        };

        var scheduleBallTimeout = function() {
          setTimeout(function() {
            createBall();
            scheduleBallTimeout();
          }, Math.random() * 500);
        };

        scheduleBallTimeout();

      });
    });

  </script>
</body>
</html>
