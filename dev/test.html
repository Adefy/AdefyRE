<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>AdefyWebGL Test</title>

  <script type="text/javascript" src="./mjax.min.js"></script>
  <script type="text/javascript" src="./underscore.min.js"></script>
  <script type="text/javascript" src="./cp.min.js"></script>
  <script type="text/javascript" src="./sylvester.js"></script>
  <script type="text/javascript" src="./glUtils.js"></script>
  <script type="text/javascript" src="./awgl.js"></script>
</head>

<body>
  <script>

    window.ajax = microAjax
    var testAd = new AWGLEngine("./adefy-test/", 4, function() {

      var boxVerts = [
        -50, -50,
        -50,  50,
         50,  50,
         50, -50,
        -50, -50
      ];

      var boxUV = [
        0, 0,
        1, 0,
        1, 1,
        0, 1,
        0, 0
      ];

      var box = new AWGLActor(boxVerts, boxUV);
      box.setPosition({ x: 400, y: 200 });
      box.setRotation(-90);
      box.setColor(255, 255, 0);

      // Create our texture
      gl = AWGLRenderer._gl

      boxTex = gl.createTexture()
      boxTexImage = new Image();
      boxTexImage.onload = function() {

        gl.bindTexture(gl.TEXTURE_2D, boxTex);
        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, boxTexImage);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);
        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);
        gl.generateMipmap(gl.TEXTURE_2D);
        gl.bindTexture(gl.TEXTURE_2D, null);

        box.setTexture(boxTex);
      };

      boxTexImage.src = "test.png";

    });

  </script>
</body>
</html>
